name: Notify on Push to Slack

on:
  push:
    branches:
      - main
    paths-ignore:
      - '**.md'
      - '**.txt'
      - 'docs/**'
      - '.gitignore'
      - '.gitattributes'

jobs:
  notify-slack:
    name: Send notification to Slack
    runs-on: ubuntu-latest
    steps:
      - name: Send notification
        uses: slackapi/slack-github-action@v1.24.0
        with:
          payload: ${{ toJson({ channel: '#C091ACD7TPG', text: format(':mailbox_with_mail: New commit to a2a-gateway :bust_in_silhouette: Author: {0} :herb: Branch: {1} :memo: Commit: {2}', github.actor, github.ref_name, (github.event.head_commit && github.event.head_commit.message) || 'No commit message') }) }}
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
