name: Notify on Push to Slack

on:
  push:
    branches:
      - main
    paths-ignore:
      - '**.md'
      - '**.txt'
      - 'docs/**'
      - '.gitignore'
      - '.gitattributes'

jobs:
  notify-slack:
    name: Send notification to Slack
    runs-on: ubuntu-latest
    steps:
      - name: Send Slack notification
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        run: |
          # ç®€åŒ– Slack æ¶ˆæ¯ - ä¸ä½¿ç”¨ jq æˆ– Python
          echo "Sending notification to Slack..."
          
          # ç›´æ¥è°ƒç”¨ curl
          curl -X POST "${SLACK_WEBHOOK_URL}" \
            -H 'Content-Type: application/json' \
            -d '{
              "text": "ğŸ“¬ New commit to a2a-gateway\n\nğŸ‘¤ Author: '"'"${{ github.actor }}"'"'\nğŸŒ¿ Branch: main\nğŸ“ Commit: '"'"${{ github.event.head_commit.message }}"'"'\nğŸ”— URL: '"'"${{ github.event.head_commit.url }}"'"'\nğŸ• Time: '"'"$(date -u +"%Y-%m-%d %H:%M:%S UTC")"'"'\n\nğŸ¤– ä¸‰å¼Ÿæ­£åœ¨åˆ†æè¿™æ¬¡æäº¤..."
            }'
