# 编码工具集成

## FR2: 编码工具集成

### FR2.1 droid 集成

- 支持通过 subprocess 调用 droid
- 使用 PTY 模式启动（确保终端兼容）
- 支持传递工作目录参数
- 支持传递任务描述和上下文

### FR2.2 Claude Code 集成

- 支持通过 subprocess 调用 Claude Code
- 使用 PTY 模式启动
- 支持多轮对话交互
- 支持传递项目上下文

### FR2.3 工具切换

- 根据 `skill_id` 自动选择工具
- 支持动态添加新编码工具
- 配置文件管理工具参数

## FR3: PTY 终端处理

### FR3.1 PTY 启动

- 所有编码工具必须通过 PTY 启动
- 正确处理终端输出（ANSI 转义码）
- 支持超时机制

### FR3.2 输出解析

- 提取编码工具的有效输出
- 过滤终端控制字符
- 保留错误信息用于调试

### FR3.3 交互式输入

- 支持向编码工具发送输入（如确认 "yes"）
- 处理多轮对话场景
- 支持超时自动取消
