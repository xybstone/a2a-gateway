# 项目概述

## 项目背景

Clawdbot 作为 AI 助手，需要调用编码工具（droid、Claude Code）来完成代码相关任务。当前通过终端直接调用这些工具存在以下问题：

1. **交互复杂**: 编码工具需要多轮对话，直接调用难以管理
2. **PTY 兼容性**: 编码工具需要伪终端（PTY），调用方式特殊
3. **状态管理**: 长时间任务需要跟踪进度和状态
4. **协议标准**: 缺乏标准化的 Agent 通信协议

## 解决方案

构建一个轻量级 A2A（Agent-to-Agent）网关，将 Clawdbot 与编码工具通过标准 A2A 协议连接：

- **无需 Temporal**: 简化架构，直接使用 FastAPI + subprocess
- **标准 A2A 协议**: 兼容 Agent Card、JSON-RPC 2.0
- **PTY 支持**: 正确处理编码工具的终端交互
- **任务管理**: 支持任务生命周期（submitted → working → completed/failed）
- **数据持久化**: 可选 Redis 支持，避免任务丢失

## 核心价值

| 指标 | 当前状态 | 目标状态 |
|------|---------|---------|
| Agent 通信标准 | 无标准化 | A2A 标准协议 |
| 编码工具集成 | 手动终端调用 | 自动化网关 |
| 任务可追踪性 | 无 | 完整生命周期 |
| 数据持久化 | 无 | 可选 Redis |
| 系统复杂度 | N/A | 最小化（无 Temporal） |

## 产品目标

### 主要目标

1. **标准化通信**: 实现 A2A 协议，使 Clawdbot 能以标准方式调用编码 Agent
2. **简化集成**: 无需 Temporal，降低运维和学习成本
3. **可靠执行**: 正确处理 PTY 交互，确保编码工具稳定运行
4. **可观测性**: 提供任务状态查询、日志记录、错误追踪
5. **生产级运维**: 完整的部署、监控、告警、发布流程

### 成功指标

- ✅ Clawdbot 通过 A2A 协议成功调用编码工具
- ✅ 支持至少 2 种编码工具（droid、Claude Code）
- ✅ 任务成功率 > 95%
- ✅ 平均响应时间 < 30 秒（简单任务）
- ✅ 支持 5 个并发任务
- ✅ 数据持久化（可选 Redis）
- ✅ 完整监控和告警
- ✅ 自动化部署流程
